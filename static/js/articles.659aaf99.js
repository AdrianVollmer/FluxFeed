"use strict";(()=>{function r(){let e=document.getElementById("load-more-btn");if(!e)return;let a=localStorage.getItem("articleView")||"cards",s=e.getAttribute("hx-get");if(!s)return;let t=new URL(s,window.location.origin);t.searchParams.set("view",a),e.setAttribute("hx-get",t.pathname+t.search),a==="compact"?e.setAttribute("hx-target","#articles-compact > div:last-child"):e.setAttribute("hx-target","#articles-cards"),typeof htmx<"u"&&htmx.process(e)}function d(e){localStorage.setItem("articleView",e);let a=document.getElementById("articles-cards"),s=document.getElementById("articles-compact"),t=document.getElementById("view-cards"),o=document.getElementById("view-compact"),c=document.getElementById("view-cards-mobile"),n=document.getElementById("view-compact-mobile");e==="compact"?(a?.classList.add("hidden"),s?.classList.remove("hidden"),t?.classList.remove("bg-blue-600","text-white"),t?.classList.add("hover:bg-gray-100","dark:hover:bg-gray-700"),o?.classList.add("bg-blue-600","text-white"),o?.classList.remove("hover:bg-gray-100","dark:hover:bg-gray-700"),c?.classList.remove("bg-blue-600","text-white"),c?.classList.add("hover:bg-gray-100","dark:hover:bg-gray-700"),n?.classList.add("bg-blue-600","text-white"),n?.classList.remove("hover:bg-gray-100","dark:hover:bg-gray-700")):(a?.classList.remove("hidden"),s?.classList.add("hidden"),t?.classList.add("bg-blue-600","text-white"),t?.classList.remove("hover:bg-gray-100","dark:hover:bg-gray-700"),o?.classList.remove("bg-blue-600","text-white"),o?.classList.add("hover:bg-gray-100","dark:hover:bg-gray-700"),c?.classList.add("bg-blue-600","text-white"),c?.classList.remove("hover:bg-gray-100","dark:hover:bg-gray-700"),n?.classList.remove("bg-blue-600","text-white"),n?.classList.add("hover:bg-gray-100","dark:hover:bg-gray-700")),r()}function i(){let e=document.querySelectorAll(".article-content"),a=96;e.forEach(s=>{s.classList.contains("expanded")||(s.scrollHeight>a?s.classList.add("collapsed"):s.classList.remove("collapsed"))})}document.addEventListener("DOMContentLoaded",()=>{let e=localStorage.getItem("articleView")||"cards";d(e),r(),i()});document.body.addEventListener("htmx:afterSwap",e=>{e.detail?.target?.id==="load-more-container"&&r(),i()});document.addEventListener("click",e=>{let a=e.target;if(a.classList.contains("toggle-content")){let t=a.closest(".article-content-wrapper")?.querySelector(".article-content");t?.classList.contains("collapsed")?(t.classList.remove("collapsed"),t.classList.add("expanded"),a.textContent="Show less"):t&&(t.classList.remove("expanded"),t.classList.add("collapsed"),a.textContent="Show more")}});document.addEventListener("click",e=>{let s=e.target.closest(".compact-article-row");if(s){let t=s.dataset.articleId,o=document.getElementById(`article-compact-${t}-expanded`);o&&(o.classList.toggle("hidden"),s.classList.toggle("expanded"))}});window.setView=d;window.checkCollapsibleContent=i;})();
